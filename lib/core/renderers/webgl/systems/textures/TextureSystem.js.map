{"version":3,"sources":["../../../../../../src/core/renderers/webgl/systems/textures/TextureSystem.js"],"names":["TextureSystem","renderer","boundTextures","currentLocation","managedTextures","contextChange","gl","CONTEXT_UID","emptyTextures","TEXTURE_2D","fromData","TEXTURE_CUBE_MAP","bindTexture","texture","i","texImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","length","bind","location","activeTexture","TEXTURE0","baseTexture","valid","glTexture","_glTextures","initTexture","target","dirtyId","updateTexture","unbind","format","type","premultiplyAlpha","push","on","destroyTexture","texturePart","sides","resource","uploadable","side","source","width","height","TEXTURE_2D_ARRAY","texImage3D","array","loaded","texSubImage3D","upload","uploadData","setStyle","skipRemove","destroy","off","indexOf","TEXTURE_WRAP_S","wrapMode","TEXTURE_WRAP_T","mipmap","scaleMode","LINEAR_MIPMAP_LINEAR","NEAREST_MIPMAP_NEAREST","NEAREST"],"mappings":"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","file":"TextureSystem.js","sourcesContent":["import WebGLSystem from '../WebGLSystem';\nimport GLTexture from './GLTexture';\nimport { removeItems } from '../../../../utils';\n\n/**\n * @class\n * @extends PIXI.WebGLSystem\n * @memberof PIXI\n */\nexport default class TextureSystem extends WebGLSystem\n{\n    /**\n     * @param {PIXI.WebGLRenderer} renderer - The renderer this System works for.\n     */\n    constructor(renderer)\n    {\n        super(renderer);\n\n        // TODO set to max textures...\n        this.boundTextures = [\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n            null,\n        ];\n\n        this.currentLocation = -1;\n\n        this.managedTextures = [];\n    }\n\n    /**\n     * Sets up the renderer context and necessary buffers.\n     *\n     * @private\n     */\n    contextChange()\n    {\n        const gl = this.gl = this.renderer.gl;\n\n        this.CONTEXT_UID = this.renderer.CONTEXT_UID;\n\n        // TODO move this.. to a nice make empty textures class..\n        this.emptyTextures = {};\n\n        this.emptyTextures[gl.TEXTURE_2D] = new GLTexture.fromData(this.gl, null, 1, 1);\n        this.emptyTextures[gl.TEXTURE_CUBE_MAP] = new GLTexture(this.gl);\n\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, this.emptyTextures[gl.TEXTURE_CUBE_MAP].texture);\n\n        let i;\n\n        for (i = 0; i < 6; i++)\n        {\n            gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        }\n\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n        for (i = 0; i < this.boundTextures.length; i++)\n        {\n            this.bind(null, i);\n        }\n    }\n\n    bind(texture, location)\n    {\n        const gl = this.gl;\n\n        location = location || 0;\n\n        if (this.currentLocation !== location)\n        {\n            this.currentLocation = location;\n            gl.activeTexture(gl.TEXTURE0 + location);\n        }\n\n        if (texture)\n        {\n            texture = texture.baseTexture || texture;\n\n            if (texture.valid)\n            {\n                const glTexture = texture._glTextures[this.CONTEXT_UID] || this.initTexture(texture);\n\n                gl.bindTexture(texture.target, glTexture.texture);\n\n                if (glTexture.dirtyId !== texture.dirtyId)\n                {\n                    glTexture.dirtyId = texture.dirtyId;\n                    this.updateTexture(texture);\n                }\n\n                this.boundTextures[location] = texture;\n            }\n        }\n        else\n        {\n            gl.bindTexture(gl.TEXTURE_2D, this.emptyTextures[gl.TEXTURE_2D].texture);\n            this.boundTextures[location] = null;\n        }\n    }\n\n    unbind(texture)\n    {\n        const gl = this.gl;\n\n        for (let i = 0; i < this.boundTextures.length; i++)\n        {\n            if (this.boundTextures[i] === texture)\n            {\n                if (this.currentLocation !== i)\n                {\n                    gl.activeTexture(gl.TEXTURE0 + i);\n                    this.currentLocation = i;\n                }\n\n                gl.bindTexture(gl.TEXTURE_2D, this.emptyTextures[texture.target].texture);\n                this.boundTextures[i] = null;\n            }\n        }\n    }\n\n    initTexture(texture)\n    {\n        const glTexture = new GLTexture(this.gl, -1, -1, texture.format, texture.type);\n\n        glTexture.premultiplyAlpha = texture.premultiplyAlpha;\n        // guarentee an update..\n        glTexture.dirtyId = -1;\n\n        texture._glTextures[this.CONTEXT_UID] = glTexture;\n\n        this.managedTextures.push(texture);\n        texture.on('dispose', this.destroyTexture, this);\n\n        return glTexture;\n    }\n\n    updateTexture(texture)\n    {\n        const glTexture = texture._glTextures[this.CONTEXT_UID];\n        const gl = this.gl;\n\n        let i;\n        let texturePart;\n\n        // TODO there are only 3 textures as far as im aware?\n        // Cube / 2D and later 3d. (the latter is WebGL2, we will get to that soon!)\n        if (texture.target === gl.TEXTURE_CUBE_MAP)\n        {\n           // console.log( gl.UNSIGNED_BYTE)\n            for (i = 0; i < texture.sides.length; i++)\n            {\n                // TODO - we should only upload what changed..\n                // but im sure this is not  going to be a problem just yet!\n                texturePart = texture.sides[i];\n\n                if (texturePart.resource)\n                {\n                    if (texturePart.resource.uploadable)\n                    {\n                        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + texturePart.side,\n                                      0,\n                                      texture.format,\n                                      texture.format,\n                                      texture.type,\n                                      texturePart.resource.source);\n                    }\n                    else\n                    {\n                        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + texturePart.side,\n                                  0,\n                                  texture.format,\n                                  texture.width,\n                                  texture.height,\n                                  0,\n                                  texture.format,\n                                  texture.type,\n                                  texturePart.resource.source);\n                    }\n                }\n                else\n                {\n                    gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + texturePart.side,\n                                  0,\n                                  texture.format,\n                                  texture.width,\n                                  texture.height,\n                                  0,\n                                  texture.format,\n                                  texture.type,\n                                  null);\n                }\n            }\n        }\n        else if (texture.target === gl.TEXTURE_2D_ARRAY)\n        {\n            gl.texImage3D(gl.TEXTURE_2D_ARRAY,\n                              0,\n                              texture.format,\n                              texture.width,\n                              texture.height,\n                              6,\n                              0,\n                              texture.format,\n                              texture.type,\n                              null);\n\n            for (i = 0; i < texture.array.length; i++)\n            {\n                // TODO - we should only upload what changed..\n                // but im sure this is not  going to be a problem just yet!\n                texturePart = texture.array[i];\n\n                if (texturePart.resource)\n                {\n                    if (texturePart.resource.loaded)\n                    {\n                        gl.texSubImage3D(gl.TEXTURE_2D_ARRAY,\n                                  0,\n                                  0, // xoffset\n                                  0, // yoffset\n                                  i, // zoffset\n                                  texturePart.resource.width,\n                                  texturePart.resource.height,\n                                  1,\n                                  texture.format,\n                                  texture.type,\n                                  texturePart.resource.source);\n                    }\n                }\n            }\n        }\n        else\n        if (texture.resource)\n            {\n            if (texture.resource.uploadable)\n                {\n                glTexture.upload(texture.resource.source);\n            }\n            else\n                {\n                glTexture.uploadData(texture.resource.source, texture.width, texture.height);\n            }\n        }\n            else\n            {\n            glTexture.uploadData(null, texture.width, texture.height);\n        }\n\n        // lets only update what changes..\n        this.setStyle(texture);\n    }\n\n    /**\n     * Deletes the texture from WebGL\n     *\n     * @param {PIXI.BaseTexture|PIXI.Texture} texture - the texture to destroy\n     * @param {boolean} [skipRemove=false] - Whether to skip removing the texture from the TextureManager.\n     */\n    destroyTexture(texture, skipRemove)\n    {\n        texture = texture.baseTexture || texture;\n\n        if (texture._glTextures[this.renderer.CONTEXT_UID])\n        {\n            this.unbind(texture);\n\n            texture._glTextures[this.renderer.CONTEXT_UID].destroy();\n            texture.off('dispose', this.destroyTexture, this);\n\n            delete texture._glTextures[this.renderer.CONTEXT_UID];\n\n            if (!skipRemove)\n            {\n                const i = this.managedTextures.indexOf(texture);\n\n                if (i !== -1)\n                {\n                    removeItems(this.managedTextures, i, 1);\n                }\n            }\n        }\n    }\n\n    setStyle(texture)\n    {\n        const gl = this.gl;\n\n        gl.texParameteri(texture.target, gl.TEXTURE_WRAP_S, texture.wrapMode);\n        gl.texParameteri(texture.target, gl.TEXTURE_WRAP_T, texture.wrapMode);\n\n        if (texture.mipmap)\n        {\n            /* eslint-disable max-len */\n            gl.texParameteri(texture.target, gl.TEXTURE_MIN_FILTER, texture.scaleMode ? gl.LINEAR_MIPMAP_LINEAR : gl.NEAREST_MIPMAP_NEAREST);\n            /* eslint-disable max-len */\n        }\n        else\n        {\n            gl.texParameteri(texture.target, gl.TEXTURE_MIN_FILTER, texture.scaleMode ? gl.LINEAR : gl.NEAREST);\n        }\n\n        gl.texParameteri(texture.target, gl.TEXTURE_MAG_FILTER, texture.scaleMode ? gl.LINEAR : gl.NEAREST);\n    }\n}\n"]}